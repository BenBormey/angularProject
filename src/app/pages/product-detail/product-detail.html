<div class="pd-container" *ngIf="!loading && product">

  <!-- LEFT: Thumbnails -->
  <div class="pd-thumbs">
    <img *ngFor="let img of selectedVariant?.images"
         [src]="img"
         (click)="selectImage(img)"
         [class.active]="img === selectedImage">
  </div>

  <!-- CENTER: Main Image -->
  <div class="pd-main-image">
    <img [src]="selectedImage">
  </div>

  <!-- RIGHT: Info -->
  <div class="pd-info">

    <h1 class="pd-title">{{ product.productName }}</h1>

    <div class="pd-rating">
      ⭐ {{ averageRating | number:'1.1-1' }} ({{ totalReviews }} reviews)
    </div>

    <div class="pd-price-box">
      <div class="old-price">${{ selectedVariant?.price }}</div>

      <div class="final-price">
        ${{ finalPrice | number:'1.2-2' }}
      </div>

      <div class="save" *ngIf="discountAmount > 0">
        You save ${{ discountAmount | number:'1.2-2' }}
      </div>
    </div>

    <!-- Variants -->
    <div class="pd-variants">
      <h4>Variants</h4>
      <div class="variant-buttons">
        <button *ngFor="let v of product.variants"
                (click)="selectVariant(v)"
                [class.active]="v.variantId === selectedVariant?.variantId">
          {{ v.color }} / {{ v.size }}
        </button>
      </div>
    </div>

    <div class="pd-stock">
      In Stock: {{ selectedVariant?.stock }}
    </div>

    <button class="btn-cart">Add to Cart</button>
    <button class="btn-buy">Buy Now</button>
  </div>

</div>

<!-- DESCRIPTION -->
<div class="pd-section">
  <h2>Description</h2>
  <p>{{ product.description }}</p>
</div>

<!-- REVIEWS -->
<div class="pd-section">
  <h2>Customer Reviews</h2>

  <div *ngFor="let r of reviews" class="review-card">
    <div class="stars">⭐ {{ r.rating }}</div>
    <p>{{ r.comment }}</p>
    <small>{{ r.createdAt | date:'short' }}</small>
  </div>
</div>
