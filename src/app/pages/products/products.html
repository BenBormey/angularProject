<div class="products-layout">
  <aside class="filter-sidebar">
    <h3 class="sidebar-title">Filters</h3>

    <div class="filter-group">
      <h4>Category</h4>
      <select [(ngModel)]="selectedCategory" (change)="applyCategoryFilter()" class="modern-select">
        <option [value]="0">All Categories</option>
        <option *ngFor="let c of categories" [value]="c.categoryId">{{c.categoryName}}</option>
      </select>
    </div>

    <div class="filter-group">
      <h4>Brand</h4>
      <select [(ngModel)]="selectedBranch" class="modern-select">
        <option [value]="0">All Brands</option>
        <option *ngFor="let b of branches" [value]="b.branchId">{{b.branchName}}</option>
      </select>
    </div>

    <div class="filter-group">
      <h4>Color</h4>
      <div class="color-options">
        <div class="color-dot black" (click)="selectedColor='Black'" [class.active]="selectedColor==='Black'"></div>
        <div class="color-dot white" (click)="selectedColor='White'" [class.active]="selectedColor==='White'"></div>
        <div class="color-dot blue" (click)="selectedColor='Blue'" [class.active]="selectedColor==='Blue'"></div>
      </div>
    </div>

    <div class="filter-group">
      <h4>Size</h4>
      <div class="size-btns">
        <button *ngFor="let s of ['S','M','L','XL']" (click)="selectedSize=s" [class.active]="selectedSize===s">{{s}}</button>
      </div>
    </div>

    <button class="btn-clear" (click)="resetFilters()">Clear Filters</button>
  </aside>

  <main class="main-content">
    <div class="results-header">
      <h2>Featured <span>Products</span></h2>
      <p>{{products.length}} items found</p>
    </div>

    <div class="products-grid">
      <div class="product-card" *ngFor="let p of products" (click)="goToDetail(p.productId)">
        <div class="image-wrapper">
          <img [src]="getFirstImage(p)" alt="product">
        </div>
        <div class="card-details">
          <span class="category-label">Electronics</span>
          <h3>{{p.productName}}</h3>
          <p class="price">$ {{getFirstPrice(p)}}</p>
          <button class="cart-btn" (click)="$event.stopPropagation()">Add to Cart</button>
        </div>
      </div>
    </div>
  </main>
</div>